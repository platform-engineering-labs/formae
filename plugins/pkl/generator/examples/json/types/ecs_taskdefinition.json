{
  "Targets": [
    {
      "Label": "us-west-1",
      "Namespace": "AWS",
      "Config": {
        "Region": "us-west-1",
        "Type": "AWS"
      }
    }
  ],
  "Resources": [
    {
      "Label": "example-app-task-def",
      "Type": "AWS::ECS::TaskDefinition",
      "Stack": "$unmanaged",
      "Target": "us-west-1",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Cpu": 0,
            "Essential": true,
            "Image": "nginx:latest",
            "Name": "example-app-container",
            "PortMappings": [
              {
                "ContainerPort": 80,
                "HostPort": 80,
                "Protocol": "tcp"
              }
            ],
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": "/ecs/example-app",
                "awslogs-region": "us-west-1",
                "awslogs-stream-prefix": "ecs"
              }
            }
          }
        ],
        "Cpu": "256",
        "ExecutionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
        "Family": "example-app-task",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE"
        ],
        "Tags": [
          {
            "Key": "FormaeResourceLabel",
            "Value": "example-task-def"
          },
          {
            "Key": "FormaeStackLabel",
            "Value": "example-app-stack"
          },
          {
            "Key": "Name",
            "Value": "example-app-task-def"
          }
        ],
        "TaskDefinitionArn": "arn:aws:ecs:us-west-1:123456789012:task-definition/example-app-task:1"
      },
      "NativeId": "arn:aws:ecs:us-west-1:123456789012:task-definition/example-app-task:1"
    },
    {
      "Label": "backend-service-task-def",
      "Type": "AWS::ECS::TaskDefinition",
      "Stack": "$unmanaged",
      "Target": "us-west-1",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Cpu": 0,
            "Essential": true,
            "Image": "123456789012.dkr.ecr.us-west-1.amazonaws.com/backend-service:latest",
            "Name": "backend-service-container",
            "PortMappings": [
              {
                "ContainerPort": 8080,
                "Protocol": "tcp"
              }
            ],
            "Environment": [
              {
                "Name": "NODE_ENV",
                "Value": "production"
              },
              {
                "Name": "PORT",
                "Value": "8080"
              }
            ],
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": "/ecs/backend-service",
                "awslogs-region": "us-west-1",
                "awslogs-stream-prefix": "ecs"
              }
            }
          }
        ],
        "Cpu": "512",
        "ExecutionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
        "Family": "backend-service-task",
        "Memory": "1024",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE"
        ],
        "TaskRoleArn": "arn:aws:iam::123456789012:role/ecsTaskRole"
      },
      "NativeId": "arn:aws:ecs:us-west-1:123456789012:task-definition/backend-service-task:2"
    },
    {
      "Label": "worker-task-def",
      "Type": "AWS::ECS::TaskDefinition",
      "Stack": "$unmanaged",
      "Target": "us-west-1",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Cpu": 0,
            "Essential": true,
            "Image": "123456789012.dkr.ecr.us-west-1.amazonaws.com/data-processor:latest",
            "Name": "worker-container",
            "Environment": [
              {
                "Name": "QUEUE_URL",
                "Value": "https://sqs.us-west-1.amazonaws.com/123456789012/example-queue"
              },
              {
                "Name": "BATCH_SIZE",
                "Value": "10"
              }
            ],
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": "/ecs/worker-service",
                "awslogs-region": "us-west-1",
                "awslogs-stream-prefix": "ecs"
              }
            }
          }
        ],
        "Cpu": "1024",
        "ExecutionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
        "Family": "worker-task",
        "Memory": "2048",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE"
        ],
        "TaskRoleArn": "arn:aws:iam::123456789012:role/workerTaskRole"
      },
      "NativeId": "arn:aws:ecs:us-west-1:123456789012:task-definition/worker-task:1"
    }
  ]
}