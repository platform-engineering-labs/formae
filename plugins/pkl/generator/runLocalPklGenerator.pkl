/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

module generator

import "pkl:json"
import "./pklGenerator.pkl"

hidden FileProp = read?("prop:File")
hidden JsonProp = read?("prop:Json")

hidden file = if(FileProp != null) read(FileProp) else read("./examples/json/lifeline.json")

hidden parsed = if(JsonProp != null) new json.Parser {}.parse(JsonProp) else new json.Parser {}.parse(file)


output {
  text = pklGenerator.generateFormaFile(parsed)
}