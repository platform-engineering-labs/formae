/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

import "pkl:reflect"
import "./helper.pkl"
import "./types.pkl"

resources = helper.GetAllResourceTypes().toList()

local const renderer = new PcfRenderer {}

output {
  text = """
  import "./types.pkl"

  // This file is auto-generated by resources.pkl
  \(  new PcfRenderer {
    indent = "    "
    converters {
        [types.ResourceType] = (it) -> it.convert()
    }
  }.renderDocument(new types.Resources {
    resources = helper.GetAllResourceTypes().toList()
  }).toString().replaceAll("\"\"\"", "").replaceAll("GoName = \"resource\"","").replaceAll("GoName = \"schema\"",""))
  """
}
