/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

module aws.apigateway.restapi

import "@formae/formae.pkl"
import "../aws.pkl"

const type = "AWS::ApiGateway::RestApi"


@aws.SubResourceHint
open class EndpointConfiguration extends formae.SubResource {
    ipAddressType: String?
    types: Listing<String>?
    vpcEndpointIds: Listing<String>?
}

@aws.SubResourceHint
open class BodyS3Location extends formae.SubResource {
    bucket: String?
    eTag: String?
    key: String?
    version: String?
}

open class RestApiResolvable extends formae.Resolvable {
    hidden type = module.type

    hidden id: RestApiResolvable = (this) {
        property = "RestApiId"
    }

    hidden restApiId: RestApiResolvable = (this) {
        property = "RestApiId"
    }

    hidden rootResourceId: RestApiResolvable = (this) {
        property = "RootResourceId"
    }
}

@aws.ResourceHint {
    type = module.type
    identifier = "RestApiId"
    tags = "Tags"
}
open class RestApi extends formae.Resource {

    @aws.FieldHint
    apiKeySourceType: String?

    @aws.FieldHint
    binaryMediaTypes: Listing<String>?

    @aws.FieldHint{
        createOnly = true
        writeOnly = true
    }
    body: Dynamic?

    @aws.FieldHint{
        createOnly = true
        writeOnly = true
    }
    bodyS3Location: BodyS3Location?

    @aws.FieldHint{
        createOnly = true
        writeOnly = true
    }
    cloneFrom: String?

    @aws.FieldHint
    description: String?

    @aws.FieldHint
    disableExecuteApiEndpoint: Boolean?

    @aws.FieldHint
    endpointConfiguration: EndpointConfiguration?

    @aws.FieldHint{
        writeOnly = true
    }
    failOnWarnings: Boolean?

    @aws.FieldHint
    minimumCompressionSize: Int?

    @aws.FieldHint{
        writeOnly = true
    }
    mode: String?

    @aws.FieldHint
    name: String?

    @aws.FieldHint{
        writeOnly = true
    }
    parameters: Mapping<String, Any>?

    @aws.FieldHint
    policy: Dynamic?

    @aws.FieldHint
    tags: Listing<formae.Tag>?

    local parent = this

    hidden res: RestApiResolvable = new {
        label = parent.label
        stack = parent.stack?.label
    }
}
