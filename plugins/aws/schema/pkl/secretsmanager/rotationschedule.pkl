/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

module aws.secretsmanager.rotationschedule

import "@formae/formae.pkl"
import "../aws.pkl"

const type = "AWS::SecretsManager::RotationSchedule"

@aws.SubResourceHint
open class HostedRotationLambda extends formae.SubResource {
    excludeCharacters: String?
    kmsKeyArn: (String|formae.Resolvable)?
    masterSecretArn: String?
    masterSecretKmsKeyArn: (String|formae.Resolvable)?
    rotationLambdaName: String?
    rotationType: String
    runtime: String?
    superuserSecretArn: (String|formae.Resolvable)?
    superuserSecretKmsKeyArn: (String|formae.Resolvable)?
    vpcSecurityGroupIds: (String|formae.Resolvable)?
    vpcSubnetIds: (String|formae.Resolvable)?
}

@aws.SubResourceHint
open class RotationRules extends formae.SubResource {
    automaticallyAfterDays: Int?
    duration: String?
    scheduleExpression: String?
}

@aws.ResourceHint {
    type = module.type
    identifier = "Id"
}
open class RotationSchedule extends formae.Resource {

    @aws.FieldHint{writeOnly = true}
    hostedRotationLambda: HostedRotationLambda?

    @aws.FieldHint{writeOnly = true}
    rotateImmediatelyOnUpdate: Boolean?

    @aws.FieldHint
    rotationLambdaARN: (String|formae.Resolvable)?

    @aws.FieldHint
    rotationRules: RotationRules?

    @aws.FieldHint{createOnly = true}
    secretId: String
}
