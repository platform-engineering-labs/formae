regions:
  - global
  - us-east-1

blocklist:
- "021891619792"

settings:
  EC2Image:
    IncludeDisabled: true
    IncludeDeprecated: true
    DisableDeregistrationProtection: true
  EC2Instance:
    DisableStopProtection: true
    DisableDeletionProtection: true
  RDSInstance:
    DisableDeletionProtection: true
  CloudFormationStack:
    DisableDeletionProtection: true
  DynamoDBTable:
    DisableDeletionProtection: true

resource-types:
  #includes:
  #  - Route53HostedZone
  #  - S3Bucket
  excludes:
    - "AWS::Timestream::Database"
    - "AWS::Timestream::ScheduledQuery"
    - "AWS::Timestream::Table"
    - AppConfigDeploymentStrategy
    - AppStreamImage
    - AthenaWorkGroup
    - Cloud9Environment # Deprecated service
    - CloudSearchDomain # Deprecated service
    - CodeDeployDeploymentConfig
    - CodePipelineCustomActionType
    - CodeStarConnection # Deprecated service
    - CodeStarNotification # Deprecated service
    - CodeStarProject # Deprecated service
    - DAXParameterGroup
    - EC2KeyPair
    - ElasticacheCacheParameterGroup
    - ElasticacheUser
    - ElasticTranscoderPipeline
    - ElasticTranscoderPreset
    - FMSNotificationChannel # Excluded because it's not available
    - FMSPolicy # Excluded because it's not available
    - IAMAccountSummary
    - IAMGroup
    - IAMGroupPolicyAttachment
    - IAMRole
    - IAMOpenIDConnectProvider
    - IAMRolePolicyAttachment
    - IAMUser
    - IAMUserAccessKey
    - IAMUserGroupAttachment
    - IAMVirtualMFADevice
    - KMSAlias
    - MachineLearningBranchPrediction # Excluded due to ML being unavailable
    - MachineLearningDataSource # Excluded due to ML being unavailable
    - MachineLearningEvaluation # Excluded due to ML being unavailable
    - MachineLearningMLModel # Excluded due to ML being unavailable
    - MediaConvertQueue
    - MemoryDBACL
    - MemoryDBParameterGroup
    - MemoryDBUser
    - OpsWorksApp # Deprecated service
    - OpsWorksCMBackup # Deprecated service
    - OpsWorksCMServer # Deprecated service
    - OpsWorksCMServerState # Deprecated service
    - OpsWorksInstance # Deprecated service
    - OpsWorksLayer # Deprecated service
    - OpsWorksUserProfile
    - OSPackage
    - RedshiftServerlessNamespace # Deprecated service
    - RedshiftServerlessSnapshot # Deprecated service
    - RedshiftServerlessWorkgroup # Deprecated service
    - RoboMakerDeploymentJob # Deprecated Service
    - RoboMakerFleet # Deprecated Service
    - RoboMakerRobot # Deprecated Service
    - RoboMakerRobotApplication
    - RoboMakerSimulationApplication
    - RoboMakerSimulationJob
    - Route53ResolverRule
    - S3Object # Excluded because S3 bucket removal handles removing all S3Objects
    - ServiceCatalogTagOption # Excluded due to https://github.com/rebuy-de/aws-nuke/issues/515
    - ServiceCatalogTagOptionPortfolioAttachment # Excluded due to https://github.com/rebuy-de/aws-nuke/issues/515
presets:
  engineers:
    filters:
      IAMUser:
        - property: Name
          type: contains
          value: "nico"
      IAMRolePolicyAttachment:
        - property: Name
          type: contains
          value: "nico"
      IAMUserPolicyAttachment:
        - property: UserName
          type: contains
          value: "nico"
  common:
    filters:
      IAMRole:
        - property: Name
          type: contains
          value: "admin-test-pel"
      IAMRolePolicyAttachment:
        - property: RoleName
          value: "admin-test-pel"
  organization:
    filters:
      IAMSAMLProvider:
        - property: ARN
          type: contains
          value: "AWSSSO"
      IAMRole:
        - property: Name
          type: contains
          value: "OrganizationAccountAccessRole"
      IAMRolePolicyAttachment:
        - property: RoleName
          value: "OrganizationAccountAccessRole"

  defaults:
    filters:
      EC2Subnet:
        - property: DefaultVPC
          value: "true"
      EC2DefaultSecurityGroupRule:
        - property: DefaultVPC
          value: "true"
      EC2DHCPOption:
        - property: DefaultVPC
          value: "true"
      EC2VPC:
        - property: IsDefault
          value: "true"
      EC2InternetGateway:
        - property: DefaultVPC
          value: "true"
      EC2InternetGatewayAttachment:
        - property: DefaultVPC
          value: "true"

accounts:
  '942849037363':
    presets:
      - common
      - engineers
      - organization
      - defaults
