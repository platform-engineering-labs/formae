/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

/// Generates imports.pkl with wildcard import for the schema namespace.
///
/// Usage:
///   pkl eval ImportsGenerator.pkl (within a project context)
///
/// Output:
///   imports = import*("@aws/**/*.pkl")
module formae.testutil.ImportsGenerator

import "PklProject"

/// Get the single schema namespace from dependencies
local namespace: String = PklProject.dependencies.keys.toList().first

output {
    text = new Listing {
        "// Generated by ImportsGenerator.pkl"
        "// Do not edit manually"
        ""
        "imports: Mapping<String, Module> = import*(\"@\(namespace)/**/*.pkl\")"
    }.join("\n")
}
