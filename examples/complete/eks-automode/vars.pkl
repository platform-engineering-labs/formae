/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

import "@formae/formae.pkl"
import "@aws/aws.pkl"

projectName = "eks-example"
clusterVersion = "1.30"
region = "us-west-1"
vpcCidr = "10.1.0.0/16"
subnetCidr1 = "10.1.1.0/24"
subnetCidr2 = "10.1.2.0/24"

vpcLabel = "eks-vpc"
clusterLabel = "eks-cluster"
nodeGroupLabel = "eks-nodegroup"

props = new Dynamic {
    name = new formae.Prop {
        flag = "name"
        default = module.projectName
    }
    region = new formae.Prop {
        flag = "region"
        default = module.region
    }
    clusterVersion = new formae.Prop {
        flag = "cluster-version"
        default = module.clusterVersion
    }
    vpcCidr = new formae.Prop {
        flag = "vpcCidr"
        default = module.vpcCidr
    }
    subnetCidr1 = new formae.Prop {
        flag = "subnetCidr1"
        default = module.subnetCidr1
    }
    subnetCidr2 = new formae.Prop {
        flag = "subnetCidr2"
        default = module.subnetCidr2
    }
}

stack: formae.Stack = new {
    label = "eks-example"
    description = "Stack for EKS Cluster deployment"
}

target: formae.Target = new formae.Target {
    label = "aws-target"
    config = new aws.Config {
        region = module.props.region.value
    }
}