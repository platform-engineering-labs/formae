/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

module general

import "@aws/aws.pkl"

typealias Team  = "team-a" | "team-b"

function regionFromTeam(team: Team): aws.Region = (
    if (team == "team-a")
        "us-east-1"
    else if (team == "team-b")
        "us-west-1"
    else
        throw("Unknown team: \(team)")
)

typealias DbRawSize = "db.t3.micro" | "db.t3.small"

typealias DbSize = String((str) -> (
    str.matches(Regex(#"(?i)^(XS|S)"#))
))

function dbRawSizeFromSize(size: DbSize): DbRawSize = (
    if (size.toLowerCase() == "xs")
        "db.t3.micro"
    else if (size.toLowerCase() == "s")
        "db.t3.small"
    else
        throw("Unknown size: \(size)")
)

