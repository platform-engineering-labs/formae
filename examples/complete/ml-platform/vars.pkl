/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

import "@formae/formae.pkl"
import "@aws/aws.pkl"

properties {
    name = new formae.Prop {
        flag = "name"
        default = "ml-platform"
    }
    
    region = new formae.Prop {
        flag = "region"
        default = "us-west-2"
    }
    
    accountId = new formae.Prop {
        flag = "account-id"
        default = "021891619792"
    }
    
    vpcCidr = new formae.Prop {
        flag = "vpc-cidr"
        default = "10.0.0.0/16"
    }
    
    publicSubnetACidr = new formae.Prop {
        flag = "public-subnet-a-cidr"
        default = "10.0.0.0/19"
    }
    
    publicSubnetBCidr = new formae.Prop {
        flag = "public-subnet-b-cidr"
        default = "10.0.32.0/19"
    }
    
    privateSubnetACidr = new formae.Prop {
        flag = "private-subnet-a-cidr"
        default = "10.0.64.0/19"
    }
    
    privateSubnetBCidr = new formae.Prop {
        flag = "private-subnet-b-cidr"
        default = "10.0.96.0/19"
    }
    
    dbInstanceClass = new formae.Prop {
        flag = "db-instance-class"
        default = "db.t3.medium"
    }
    
    dbUsername = new formae.Prop {
        flag = "db-username"
        default = "dbadmin"
    }
}

stack: formae.Stack = new {
    label = properties.name.value
    description = "ML Platform Infrastructure"
}

target: formae.Target = new {
    label = "default-aws-target"
    config = new aws.Config {
        region = properties.region.value
    }
}